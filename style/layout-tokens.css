/*
 * layout-tokens.css
 * ─────────────────────────────────────────────────────────
 * Single source of truth for layout-specific color tokens.
 *
 * HOW IT WORKS:
 *   Each layout wrapper gets a data-layout="x" attribute.
 *   Components inside use --lt-* tokens instead of direct
 *   CSS variables so colors are controlled from one place.
 *
 * NESTING RULE:
 *   Each layout block includes a high-specificity nested
 *   selector so inner layouts always override outer ones.
 *
 * TOKENS:
 *   --lt-bg            main surface background
 *   --lt-fg            primary text color
 *   --lt-border        border color
 *   --lt-shadow        box-shadow token
 *   --lt-status-bar    iOS/browser status bar color
 *
 * GLOBAL PALETTE (GP):
 *   Set --gp-* once to control all layouts at once.
 *   Individual layout blocks reference var(--gp-*) by default.
 *   Override any single token in a layout block to break from group.
 *
 * IMPORT in globals.css (before @tailwind directives):
 *   @import "@/style/layout-tokens.css";
 * ─────────────────────────────────────────────────────────
 */

/* ─── GLOBAL PALETTE (GP) ─────────────────────────────── */
/*
 * Change these to update ALL layouts simultaneously.
 * To override a single layout, edit that layout's block below.
 *
 * EXAMPLE - make everything primary-based in light mode:
 *   --gp-bg: hsl(var(--primary));
 *   --gp-fg: hsl(var(--primary-foreground));
 *
 * EXAMPLE - make everything muted in dark mode:
 *   --gp-bg: hsl(var(--muted));
 *   --gp-fg: hsl(var(--muted-foreground));
 *//*
 * ─── GLOBAL PALETTE (GP) ──────────────────────────────────
 * Set these once to control all layouts simultaneously.
 * Individual layout blocks below can override per-layout.
 *
 * USAGE IN LAYOUT BLOCKS:
 *   --lt-bg: var(--gp-bg);        ← inherits group color
 *   --lt-bg: hsl(var(--primary)); ← overrides individually
 * 
 * CRITICAL FIX FOR iOS STATUS BAR:
 *   --gp-status-bar must be a RESOLVED color value (no var() references)
 *   because it gets read by JavaScript for meta tags.
 *   
 *   ✅ CORRECT: hsl(0 84.2% 60.2%)
 *   ❌ WRONG:   hsl(var(--destructive))
 * ─────────────────────────────────────────────────────────
 */

:root {
  --gp-bg:         hsl(var(--destructive));
  --gp-fg:         hsl(var(--destructive-foreground));
  --gp-border:     hsl(var(--destructive) / 0.4);
  --gp-shadow:     var(--shadow-sm);
  --gp-status-bar: hsl(0 84.2% 60.2%); /* RESOLVED destructive color for iOS */
}

.dark {
  --gp-bg:         hsl(var(--destructive));
  --gp-fg:         hsl(var(--destructive-foreground));
  --gp-border:     hsl(var(--destructive) / 0.4);
  --gp-shadow:     var(--shadow-md);
  --gp-status-bar: hsl(0 62.8% 30.6%); /* RESOLVED dark destructive color for iOS */
}
/* ─── SHOP HEADER ─────────────────────────────────────── */
[data-layout="shop"],
:is([data-layout]) [data-layout="shop"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     var(--gp-border);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}

.dark [data-layout="shop"],
.dark :is([data-layout]) [data-layout="shop"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     var(--gp-border);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}
/* ─── APP HEADER ──────────────────────────────────────── */
[data-layout="app"],
:is([data-layout]) [data-layout="app"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     hsl(var(--primary) / 0.2);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}

.dark [data-layout="app"],
.dark :is([data-layout]) [data-layout="app"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     hsl(var(--primary) / 0.2);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}

/* ─── DASHBOARD HEADER ────────────────────────────────── */
[data-layout="dashboard"],
:is([data-layout]) [data-layout="dashboard"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     var(--gp-border);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}

.dark [data-layout="dashboard"],
.dark :is([data-layout]) [data-layout="dashboard"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     var(--gp-border);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}
/* ─── SIDEBAR ─────────────────────────────────────────── */
[data-layout="sidebar"],
:is([data-layout]) [data-layout="sidebar"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     var(--gp-border);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}

.dark [data-layout="sidebar"],
.dark :is([data-layout]) [data-layout="sidebar"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     var(--gp-border);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}

/* ─── FOOTER ──────────────────────────────────────────── */
[data-layout="footer"],
:is([data-layout]) [data-layout="footer"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     var(--gp-border);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}

.dark [data-layout="footer"],
.dark :is([data-layout]) [data-layout="footer"] {
  --lt-bg:         var(--gp-bg);
  --lt-fg:         var(--gp-fg);
  --lt-border:     var(--gp-border);
  --lt-shadow:     var(--gp-shadow);
  --lt-status-bar: var(--gp-status-bar);
}